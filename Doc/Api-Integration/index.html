<!DOCTYPE html>
<html>

<head>
  <title> Task</title>
</head>

<body>
  <style>
    select {
      width: 200px;
    }
  </style>
  <select id="country">
    <option value=""> Select Country </option>
  </select>

  <select id="state">
    <option value="">Select State </option>
  </select>

  <select id="city">
    <option value=""> Select City </option>
  </select>

  <script>
    let Data = [];

    async function getCountry() {
      let req = await fetch("https://countriesnow.space/api/v0.1/countries/states");
      let res = await req.json()

      Data = res.data
      console.log(Data);

      let countrySelect = document.getElementById("country");
      Data.forEach(element => {
        let option = document.createElement("option");
        option.textContent = element.name
        // option.value = element.name;
        // console.log(option.value)
        countrySelect.append(option)
      });
      //
      let State = document.getElementById("state");
      // let City = document.getElementById("city");
      // console.log(State, 'state');

      let selectedCountry = document.getElementById("country").value
      let country = Data.filter(item => item.name === selectedCountry)
      if (country) {
        Data.forEach(state => {
          let option = document.createElement("option")
          option.textContent = state.name;
          console.log(option.textContent);
          
          console.log(state);
          State.append(option)
        })
      }
    }

    // function getStates() {
    //   let State = document.getElementById("state");
    //   // let City = document.getElementById("city");
    //   console.log(State, 'state');

    //   let selectedCountry = document.getElementById("country").value
    //   let country = Data.find(item => item.name === selectedCountry)
    //   if (country) {
    //     Data.forEach(state => {
    //       let option = document.createElement("option")
    //       option.textContent = state.name;
    //       console.log(state.name);

    //       State.appendChild(option)
    //     })
    //   }
    // }
    // document.getElementById("country").addEventListener("change", getStates);

    getCountry();
  </script>

</body>

</html>