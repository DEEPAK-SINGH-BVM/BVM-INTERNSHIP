<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

</body>
<script>
    /*
    // New Task
🧠 Theory: Categorized Fruit Tracker
This task processes a long string of fruit data. Each entry looks like 
“fruit:quantity:category” (e.g. “apple:3:A”). You’ll parse, clean, group, and 
calculate summary data.

🧠 Step 1 – Parse & Clean
Input: A comma-separated string
Example:
"apple:3:A,banana:5:B,apple:x:A,grape:6:C,mango:7:A,orange:3:A,banana:-2:B"
Goal:
Remove invalid entries:
oQuantity is not a number
oQuantity is negative
oMissing parts

🧠 Result:
[
  { name: "apple", quantity: 3, category: "A" },
  { name: "banana", quantity: 5, category: "B" },
  { name: "grape", quantity: 6, category: "C" },
  { name: "mango", quantity: 7, category: "A" },
  { name: "orange", quantity: 3, category: "A" }
]

🧠 Step 2 – Filter
Goal: Keep only items matching:
Given category (e.g. “A”)
Minimum quantity (e.g. ≥ 3)

🧠 Result:
[
  { name: "apple", quantity: 3 },
  { name: "mango", quantity: 7 },
  { name: "orange", quantity: 3 }
]

🧠 Step 3 – Group & Count
Goal:
Group fruits by name
Track total quantity and how many times each appears

🧠 Result:
{
  apple: { total: 3, count: 1 },
  mango: { total: 7, count: 1 },
  orange: { total: 3, count: 1 }
}

🧠 Step 4 – Final Stats
Goal:
Add percentage share of each fruit
Round off values if needed
Show name, total, and percent

🧠 Result:
[
  { name: "mango", total: 7, percent: 50 },
  { name: "apple", total: 3, percent: 21.43 },
  { name: "orange", total: 3, percent: 21.43 }
]

Sort:
By total (high to low)
Then by percent (if same)
/**
 // Step 1 – Parse & Clean
  let data = "apple:3:A,banana:5:B,apple:x:A,grape:6:C,mango:7:A,orange:3:A,banana:-2:B";

  let items = data.split(",");
  let cleaned = [];

  for (let item of items) {
    let parts = item.split(":");
    if (parts.length === 3) {
      let name = parts[0];
      let quantity = parts[1];
      let category = parts[2];

      if (quantity > 0) {
        cleaned.push({ name, quantity: Number(quantity), category });
      }
    }
  }

  console.log(" Step 1 - Cleaned:", cleaned);

  // Step 2 – Filter (category = "A", quantity >= 3)
  let filtered = cleaned.filter(obj => {
    return obj.category === "A" && obj.quantity >= 3;
  }).map(obj => {
    return { name: obj.name, quantity: obj.quantity };
  });

  console.log(" Step 2 - Filtered:", filtered);

  // Step 3 – Group & Count
  let grouped = {};

  for (let fruit of filtered) {
    if (!grouped[fruit.name]) {
      grouped[fruit.name] = {
        total: fruit.quantity,
        count: 1
      };
    } else {
      grouped[fruit.name].total += fruit.quantity;
      grouped[fruit.name].count += 1;
    }
  }

  console.log(" Step 3 - Grouped:", grouped);

  // Step 4 – Final Stats with Percent and Sort
  let finalStats = [];
  let totalAll = 0;

  for (let key in grouped) {
    totalAll += grouped[key].total;
  }

  for (let key in grouped) {
    let total = grouped[key].total;
    let percent = (total / totalAll) * 100;
    percent = Math.round(percent * 100) / 100; // round to 2 decimals

    finalStats.push({
      name: key,
      total: total,
      percent: percent
    });
  }

  finalStats.sort((a, b) => {
    if (b.total === a.total) {
      return b.percent - a.percent;
    }
    return b.total - a.total;
  });

  console.log(" Step 4 - Final Stats:", finalStats);
    */
</script>

</html>
